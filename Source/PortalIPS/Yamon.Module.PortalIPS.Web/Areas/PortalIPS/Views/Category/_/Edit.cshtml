
@{
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由亚萌智能表单代码生成工具生成。
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。除非此项目不再使用代码生成器生成。
//     如果想修改此文件的内容，请复制一份到此文件的上级目录进行修改
//
//     如有问题联系zongeasy@qq.com
//</auto-generated>
//------------------------------------------------------------------------------
    ViewBag.Title="编辑栏目管理";
}

<div region="center" border="true" style="padding: 10px; background: #FFFFFF; border: 1px solid #ccc;">
    <form id="myForm" name="myForm" action="/api/PortalIPS/Category/Edit" method="post">
        <table class="mytable"  cellpadding="1" width="100%" cellspacing="0" align="center">
<tr id="Container_C_ParentID"><td id="Label_C_ParentID" class="labeltd">父级栏目名称：</td><td>&nbsp;

<input id="C_ParentID" name="C_ParentID" url="/api/PortalIPS/Category/EditTree?&iscombo=1&Value=@(Model.C_ParentID)" value="@(Model.C_ParentID)" style="width: 200px" />
<script type="text/javascript">
    var C_ParentID_Value = '@(Model.C_ParentID)';
    jQuery(function() {
        jQuery('#C_ParentID').combotree(
        {
            onLoadSuccess:function(node, data) {
                jQuery('#C_ParentID').combotree('setValue',C_ParentID_Value);
            }
        });
    });
</script>
</td></tr>
<tr id="Container_CategoryName"><td id="Label_CategoryName" class="labeltd">栏目名称：</td><td>&nbsp;
<input type="text" id="CategoryName" name="CategoryName" value="@(Model.CategoryName)" class="easyui-validatebox textbox" required="true"  maxlength="50" style="width:200px" />
</td></tr>
<tr id="Container_DisplayName"><td id="Label_DisplayName" class="labeltd">显示名称：</td><td>&nbsp;
<input type="text" id="DisplayName" name="DisplayName" value="@(Model.DisplayName)" class="easyui-validatebox textbox" required="true"  maxlength="50" style="width:200px" />
</td></tr>
<tr id="Container_BackNvarchar2"><td id="Label_BackNvarchar2" class="labeltd">栏目类型：</td><td>&nbsp;
@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_BackNvarchar2, "BackNvarchar2", Model.BackNvarchar2, "&nbsp;&nbsp;"))
</td></tr>
<tr id="Container_IsJournal"><td id="Label_IsJournal" class="labeltd">栏目显示类型：</td><td>&nbsp;
@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_IsJournal, "IsJournal", Model.IsJournal, "&nbsp;&nbsp;"))
</td></tr>
<tr id="Container_CategoryInfoType"><td id="Label_CategoryInfoType" class="labeltd">信息类型：</td><td>&nbsp;
@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_CategoryInfoType, "CategoryInfoType", Model.CategoryInfoType, "&nbsp;&nbsp;"))
</td></tr>
<tr id="Container_OrderNum"><td id="Label_OrderNum" class="labeltd">排序ID：</td><td>&nbsp;
<input type="text" id="OrderNum" name="OrderNum" value="@(Model.OrderNum)" class="easyui-validatebox textbox" required="true"  maxlength="4" style="width:200px" />
</td></tr>
<tr id="Container_IconName"><td id="Label_IconName" class="labeltd">栏目标识：</td><td>&nbsp;
<input type="text" id="IconName" name="IconName" value="@(Model.IconName)" class="easyui-validatebox textbox" required="true"  maxlength="500" style="width:200px" />
<span title="每站点对应的标识"  class="easyui-tooltip"><a href="#" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-help'"></a></span></td></tr>
<tr id="Container_IconPath"><td id="Label_IconPath" class="labeltd">栏目图片：</td><td>&nbsp;
<input type="text" id="IconPath" name="IconPath" value="@(Model.IconPath)"   class="easyui-validatebox" style="width:200px"/>
<br/>
<input class="easyui-filebox" data-options="buttonText:'浏览',accept: 'image/*',buttonAlign:'left'" id="Upload_IconPath" name="Upload_IconPath" style="width: 200px;" />
<input class="easyui-linkbutton" type="button" id="btnIconPath_Upload" name="btnIconPath_Upload" value="上传" onclick="btnIconPath_UploadClick()"/>
@if(!string.IsNullOrEmpty(Model.IconPath)){
 <br/><img id="Preview_IconPath" src="@(Model.IconPath)" style="height: 60px; "/>
}else{
 <br/><img id="Preview_IconPath" src="@(Model.IconPath)" style="height: 60px; display: none; "/>
 }
<script type="text/javascript">
    ///上传按钮事件
    function btnIconPath_UploadClick(){
        jQuery("#myForm").ajaxSubmit( {
            type: 'post',
            dataType: 'text',
            url: "/api/SiteManage/UploadImage/Upload?FieldName=IconPath&UploadFieldName=Upload_IconPath&ModelID=Category&ModuleID=PortalIPS",
            beforeSubmit: function(formData, jqForm, options) {
                var queryString = jQuery.param(formData);
                if( jQuery("Upload_IconPath").val()==""){
                    alert("请选择你要上传的图片！");
                }
                return true;
            },
            success: function(msg) {
                eval("var result="+msg);
                if(result.Status==1){
                    jQuery("#IconPath").val(result.returnValue);
                    alert("上传成功!");
                    $('#Upload_IconPath').filebox('clear');
                    $('#Preview_IconPath').attr('src',result.returnValue);
                }else{
                    alert(result.returnValue);
                }
            },
            error: function(error) {
            }
        });
    }
</script>
</td></tr>
<tr id="Container_Flag"><td id="Label_Flag" class="labeltd">是否启用：</td><td>&nbsp;
@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_Flag, "Flag", Model.Flag, "&nbsp;&nbsp;"))
</td></tr>
<tr id="Container_BackNvarchar"><td id="Label_BackNvarchar" class="labeltd">映射栏目编号：</td><td>&nbsp;
<input type="text" id="BackNvarchar" name="BackNvarchar" value="@(Model.BackNvarchar)" class="easyui-validatebox textbox"  maxlength="50" style="width:200px" />
</td></tr>
<tr id="Container_BackNvarchar1"><td id="Label_BackNvarchar1" class="labeltd">是否需要发布：</td><td>&nbsp;
@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_BackNvarchar1, "BackNvarchar1", Model.BackNvarchar1, "&nbsp;&nbsp;"))
</td></tr>
<tr id="Container_CategoryPath"><td id="Label_CategoryPath" class="labeltd">栏目路径：</td><td>&nbsp;
<input type="text" id="CategoryPath" name="CategoryPath" value="@(Model.CategoryPath)" class="easyui-validatebox textbox" required="true"  maxlength="50" style="width:200px" />
<span class="tips">栏目名称拼音首字母</span></td></tr>
<tr id="Container_TemplatePath"><td id="Label_TemplatePath" class="labeltd">模板目录：</td><td>&nbsp;
<input type="text" id="TemplatePath" name="TemplatePath" value="@(Model.TemplatePath)" class="easyui-validatebox textbox"  maxlength="30" style="width:200px" />
</td></tr>
<tr id="Container_IndexTemplate"><td id="Label_IndexTemplate" class="labeltd">栏目主页模板：</td><td>&nbsp;
<input type="text" id="IndexTemplate" name="IndexTemplate" value="@(Model.IndexTemplate)" class="easyui-validatebox textbox"  maxlength="30" style="width:200px" />
</td></tr>
<tr id="Container_ListTemplate"><td id="Label_ListTemplate" class="labeltd">栏目列表页模板：</td><td>&nbsp;
<input type="text" id="ListTemplate" name="ListTemplate" value="@(Model.ListTemplate)" class="easyui-validatebox textbox"  maxlength="30" style="width:200px" />
</td></tr>
<tr id="Container_DetailTemplate"><td id="Label_DetailTemplate" class="labeltd">栏目详细页模板：</td><td>&nbsp;
<input type="text" id="DetailTemplate" name="DetailTemplate" value="@(Model.DetailTemplate)" class="easyui-validatebox textbox"  maxlength="30" style="width:200px" />
</td></tr>
<tr id="Container_LinkUrl"><td id="Label_LinkUrl" class="labeltd">栏目导航地址：</td><td>&nbsp;
<textarea id="LinkUrl" name="LinkUrl" class="easyui-validatebox"  style="width:500px;height:40px">@(Model.LinkUrl)</textarea>
</td></tr>
<tr id="Container_ManageLinkUrl"><td id="Label_ManageLinkUrl" class="labeltd">后台链接地址：</td><td>&nbsp;
<textarea id="ManageLinkUrl" name="ManageLinkUrl" class="easyui-validatebox"  style="width:500px;height:40px">@(Model.ManageLinkUrl)</textarea>
</td></tr>
<tr id="Container_Description"><td id="Label_Description" class="labeltd">栏目描述：</td><td>&nbsp;
<textarea id="Description" name="Description" class="easyui-validatebox"  style="width:500px;height:80px">@(Model.Description)</textarea>
</td></tr>
<tr id="Container_IsTopMenuToPage"><td id="Label_IsTopMenuToPage" class="labeltd">是否设为热门专题：</td><td>&nbsp;

@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_IsTopMenuToPage, "IsTopMenuToPage", Model.IsTopMenuToPage, "&nbsp;&nbsp;"))
</td></tr>
<input type="hidden" id="ParentID"  name="ParentID" value="@(Model.ParentID)"/><input type="hidden" id="CategoryID"  name="CategoryID" value="@(Model.CategoryID)"/><input type="hidden" id="CategoryType"  name="CategoryType" value="@(Model.CategoryType)"/>
</table>

        @RenderPage("~/Areas/PortalIPS/Views/Category/Extend/Model_FormHtml.cshtml")
    </form>
</div>
<div region="south" border="false" style="text-align: right; background: #F6F6F6;height: 30px; line-height: 30px;">
    <a id="btnSubmit" class="easyui-linkbutton" icon="icon-ok" href="javascript:void(0)">确定</a>
    <a id="btnCancel" class="easyui-linkbutton" icon="icon-cancel" href="javascript:CloseDialog();">
        取消
    </a>
</div>
@section scripts{
    <script src="/Resources/JsLib/jquery.form.js"></script>
    <script src="/Resources/JsLib/My97DatePicker/WdatePicker.js"></script>
    <script src="/Static/v1/js/Utils.js"></script>
    <script src="/Static/v1/js/form.js"></script>
    <script type="text/javascript">
        jQuery(function() {
            CheckConditions();
jQuery('input[name=BackNvarchar2]').bind('click', CheckConditions);
function CheckConditions(){
if((IsInCheckBox(document.myForm.BackNvarchar2,'多信息')||IsInCheckBox(document.myForm.BackNvarchar2,'单信息')||IsInCheckBox(document.myForm.BackNvarchar2,'专题栏目'))){
jQuery('#Container_AppID').show();
} 
else{ 
jQuery('#Container_AppID').hide();
} 
if((IsInCheckBox(document.myForm.BackNvarchar2,'多信息')||IsInCheckBox(document.myForm.BackNvarchar2,'单信息')||IsInCheckBox(document.myForm.BackNvarchar2,'专题栏目'))){
jQuery('#Container_BackInt').show();
} 
else{ 
jQuery('#Container_BackInt').hide();
} 
if(IsInCheckBox(document.myForm.BackNvarchar2,'映射栏目')){
jQuery('#Container_BackNvarchar').show();
} 
else{ 
jQuery('#Container_BackNvarchar').hide();
} 
if((IsInCheckBox(document.myForm.BackNvarchar2,'多信息')||IsInCheckBox(document.myForm.BackNvarchar2,'单信息')||IsInCheckBox(document.myForm.BackNvarchar2,'专题栏目'))){
jQuery('#Container_BackNvarchar1').show();
} 
else{ 
jQuery('#Container_BackNvarchar1').hide();
} 
if((IsInCheckBox(document.myForm.BackNvarchar2,'多信息')||IsInCheckBox(document.myForm.BackNvarchar2,'单信息')||IsInCheckBox(document.myForm.BackNvarchar2,'专题栏目'))){
jQuery('#Container_DetailTemplate').show();
} 
else{ 
jQuery('#Container_DetailTemplate').hide();
} 
if((IsInCheckBox(document.myForm.BackNvarchar2,'多信息')||IsInCheckBox(document.myForm.BackNvarchar2,'单信息')||IsInCheckBox(document.myForm.BackNvarchar2,'专题栏目')||IsInCheckBox(document.myForm.BackNvarchar2,'容器栏目')||IsInCheckBox(document.myForm.BackNvarchar2,'单页面'))){
jQuery('#Container_IndexTemplate').show();
} 
else{ 
jQuery('#Container_IndexTemplate').hide();
} 
if((IsInCheckBox(document.myForm.BackNvarchar2,'多信息')||IsInCheckBox(document.myForm.BackNvarchar2,'单信息')||IsInCheckBox(document.myForm.BackNvarchar2,'专题栏目'))){
jQuery('#Container_IsOpened').show();
} 
else{ 
jQuery('#Container_IsOpened').hide();
} 
if(IsInCheckBox(document.myForm.BackNvarchar2,'外部链接')){
jQuery('#Container_LinkUrl').show();
} 
else{ 
jQuery('#Container_LinkUrl').hide();
} 
if((IsInCheckBox(document.myForm.BackNvarchar2,'多信息')||IsInCheckBox(document.myForm.BackNvarchar2,'单信息')||IsInCheckBox(document.myForm.BackNvarchar2,'专题栏目'))){
jQuery('#Container_ListTemplate').show();
} 
else{ 
jQuery('#Container_ListTemplate').hide();
} 
jQuery('fieldset').show(); 
jQuery("fieldset").each(function(){ 
if(jQuery('tr',this).length>0){
if(jQuery('tr:visible',this).length>0){jQuery(this).show()} else{jQuery(this).hide()}
}
});
}
;
        });
    </script>
    @RenderPage("~/Areas/PortalIPS/Views/Category/Extend/Model_FormJs.cshtml")
}

