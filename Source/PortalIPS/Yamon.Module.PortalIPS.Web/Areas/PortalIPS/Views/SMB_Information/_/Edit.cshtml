
@{
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由亚萌智能表单代码生成工具生成。
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。除非此项目不再使用代码生成器生成。
//     如果想修改此文件的内容，请复制一份到此文件的上级目录进行修改
//
//     如有问题联系zongeasy@qq.com
//</auto-generated>
//------------------------------------------------------------------------------
    ViewBag.Title="编辑信息内容";
}

<div region="center" border="true" style="padding: 10px; background: #FFFFFF; border: 1px solid #ccc;">
    <form id="myForm" name="myForm" action="/api/PortalIPS/SMB_Information/Edit" method="post">
        <table class="mytable"  cellpadding="1" width="100%" cellspacing="0" align="center">
<tr id="Container_CategoryID">
<td class="labeltd">所属栏目：</td><td>&nbsp;
<input id="CategoryID" name="CategoryID" url="/api/PortalIPS/Category/EditTree?&Value=@(Model.CategoryID)"  required="true"   style="width:400px;" multiple="true" value="" cascadeCheck="false" onlyLeafCheck="false">
<script type="text/javascript">
    var CategoryID_Value = '@(Model.CategoryID)';
    jQuery(function() {
        jQuery('#CategoryID').combotree(
        {
            onLoadSuccess:function(node, data) {
                var arrValue=CategoryID_Value.split(',');
                jQuery('#CategoryID').combotree('setValues',arrValue);
            }
        });
    });
</script></td>
<td class="labeltd">信息类型：</td><td>&nbsp;
@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_InfoType, "InfoType", Model.InfoType, "&nbsp;&nbsp;"))
</td>
</tr>
<tr id="Container_BackNvarchar2">
<td class="labeltd">文号：</td><td>&nbsp;
<input type="text" id="BackNvarchar2" name="BackNvarchar2" value="@(Model.BackNvarchar2)" class="easyui-validatebox textbox"  maxlength="500" style="width:200px" />
</td>
<td class="labeltd">索引号：</td><td>&nbsp;<input type="hidden" id="BackNvarchar3"  name="BackNvarchar3" value="@(Model.BackNvarchar3)"/><span id="BackNvarchar3_ShowValue">@(Model.BackNvarchar3)</span></td>
</tr>
<tr id="Container_Title">
<td  class="labeltd">标题：</td><td  colspan="3" >&nbsp;
<input type="text" id="Title" name="Title" value="@(Model.Title)" class="easyui-validatebox textbox" required="true"  maxlength="255" style="width:70%" />
<span class="tips">建议不超过24个字符！</span></td>
</tr>
<tr id="Container_SubTitle">
<td  class="labeltd">副标题：</td><td  colspan="3" >&nbsp;
<input type="text" id="SubTitle" name="SubTitle" value="@(Model.SubTitle)" class="easyui-validatebox textbox"  maxlength="1000" style="width:70%" />
</td>
</tr>
<tr id="Container_ShowTime">
<td class="labeltd">显示日期：</td><td>&nbsp;    <input class="Wdate" type="text" onClick="WdatePicker({dateFmt:'yyyy-MM-dd'})" id="ShowTime" name="ShowTime" value="@(Model.ShowTime_ShowValue)" style="width:120px;">
</td>
<td class="labeltd">讲者：</td><td>&nbsp;
<input type="text" id="Author" name="Author" value="@(Model.Author)" class="easyui-validatebox textbox"  maxlength="50" style="width:200px" />
</td>
</tr>
<tr id="Container_Source">
<td class="labeltd">信息来源：</td><td>&nbsp;
<input type="text" id="Source" name="Source" value="@(Model.Source)" class="easyui-validatebox textbox"  maxlength="255" style="width:200px" />
</td>
<td class="labeltd">关键字：</td><td>&nbsp;
<input type="text" id="Keywords" name="Keywords" value="@(Model.Keywords)" class="easyui-validatebox textbox"  maxlength="255" style="width:200px" />
</td>
</tr>
<tr id="Container_MediaFileName">
<td  class="labeltd">首页图片：</td><td  colspan="3" >&nbsp;
<input type="text" id="MediaFileName" name="MediaFileName" value="@(Model.MediaFileName)"   class="easyui-validatebox" style="width:200px"/>
<br/>
<input class="easyui-filebox" data-options="buttonText:'浏览',accept: 'image/*',buttonAlign:'left'" id="Upload_MediaFileName" name="Upload_MediaFileName" style="width: 200px;" />
<input class="easyui-linkbutton" type="button" id="btnMediaFileName_Upload" name="btnMediaFileName_Upload" value="上传" onclick="btnMediaFileName_UploadClick()"/>
<input type="checkbox" id="ImageWater_MediaFileName" name="ImageWater_MediaFileName" value="1" />
<label for="ImageWater_MediaFileName">添加水印</label>
@if(!string.IsNullOrEmpty(Model.MediaFileName)){
 <br/><img id="Preview_MediaFileName" src="@(Model.MediaFileName)" style="height: 60px; "/>
}else{
 <br/><img id="Preview_MediaFileName" src="@(Model.MediaFileName)" style="height: 60px; display: none; "/>
 }
<script type="text/javascript">
    ///上传按钮事件
    function btnMediaFileName_UploadClick(){
        jQuery("#myForm").ajaxSubmit( {
            type: 'post',
            dataType: 'text',
            url: "/api/SiteManage/UploadImage/Upload?FieldName=MediaFileName&UploadFieldName=Upload_MediaFileName&ModelID=SMB_Information&ModuleID=PortalIPS",
            beforeSubmit: function(formData, jqForm, options) {
                var queryString = jQuery.param(formData);
                if( jQuery("Upload_MediaFileName").val()==""){
                    alert("请选择你要上传的图片！");
                }
                return true;
            },
            success: function(msg) {
                eval("var result="+msg);
                if(result.Status==1){
                    jQuery("#MediaFileName").val(result.returnValue);
                    alert("上传成功!");
                    $('#Upload_MediaFileName').filebox('clear');
                    $('#Preview_MediaFileName').attr('src',result.returnValue);
                }else{
                    alert(result.returnValue);
                }
            },
            error: function(error) {
            }
        });
    }
</script>
<span class="tips">推荐尺寸：600×500</span></td>
</tr>
<tr id="Container_CreatorName">
<td class="labeltd">发布人：</td><td>&nbsp;<input type="hidden" id="CreatorName"  name="CreatorName" value="@(Model.CreatorName)"/><span id="CreatorName_ShowValue">@(Model.CreatorName)</span></td>
<td class="labeltd">发布部门：</td><td>&nbsp;<input type="hidden" id="GroupName"  name="GroupName" value="@(Model.GroupName)"/><span id="GroupName_ShowValue">@(Model.GroupName)</span></td>
</tr>
<tr id="Container_Description">
<td  class="labeltd">经文：</td><td  colspan="3" >&nbsp;
<textarea id="Description" name="Description" class="easyui-validatebox"  style="width:95%;height:80px">@(Model.Description)</textarea>
</td>
</tr>
<tr id="Container_BackBoolean1">
<td class="labeltd">突出显示：</td><td>&nbsp;

@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_BackBoolean1, "BackBoolean1", Model.BackBoolean1, "&nbsp;&nbsp;"))
</td>
<td class="labeltd">排序号：</td><td>&nbsp;
<input type="text" id="BackInt" name="BackInt" value="@(Model.BackInt)" class="easyui-numberbox" min="-10000" max="10000000"  style="width:200px;"/>
</td>
</tr>
<tr id="Container_BackNvarchar4">
<td  class="labeltd">链接地址：</td><td  colspan="3" >&nbsp;
<input type="text" id="BackNvarchar4" name="BackNvarchar4" value="@(Model.BackNvarchar4)" class="easyui-validatebox textbox"  maxlength="500" style="width:500px" />
</td>
</tr>
<tr id="Container_BackInt3">
<td class="labeltd">是否列表显示：</td><td>&nbsp;
@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_BackInt3, "BackInt3", Model.BackInt3, "&nbsp;&nbsp;"))
</td>
<td>&nbsp;</td><td>&nbsp;</td>
</tr>
<tr id="Container_VideoUrl">
<td  class="labeltd">视频音频地址：</td><td  colspan="3" >&nbsp;
<input type="text" id="VideoUrl" name="VideoUrl" value="@(Model.VideoUrl)" class="easyui-validatebox textbox"  maxlength="500" style="width:500px" />
<span title="视频直接输入地址，音频可上传"  class="easyui-tooltip"><a href="#" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-help'"></a></span></td>
</tr>
<tr id="Container_Content">
<td  class="labeltd">内容：</td><td  colspan="3" >&nbsp;
<textarea id="Content" name="Content" style="width:100%;height:500px">@(Model.Content)</textarea>
<script src="/Resources/JsLib/ueditor/ueditor.config.js"></script>
<script src="/Resources/JsLib/ueditor/ueditor.all.js"></script>
<script src="/Resources/JsLib/ueditor/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript">
    $(function() {
        UE.getEditor('Content');
    });
</script></td>
</tr>
<tr id="Container_Attachment">
<td  class="labeltd">附件：</td><td  colspan="3" >&nbsp;<iframe id="tab2Frame" name="tab2Frame" style="width:99%;height:300px" src="/PortalIPS/Attachment/Grid1?InfoGuid=@(Model.InfoGuid)&AppID=@(RequestHelper.GetString("AppID"))&Menu=95f050d0-b4fb-442f-8d76-2a88eb794627&IFrameDepth=0" frameborder="0"></iframe></td>
</tr>
<input type="hidden" id="InfoGuid"  name="InfoGuid" value="@(Model.InfoGuid)"/><input type="hidden" id="Creator"  name="Creator" value="@(Model.Creator)"/><input type="hidden" id="CreateTime"  name="CreateTime" value="@(Model.CreateTime)"/><input type="hidden" id="GroupID"  name="GroupID" value="@(Model.GroupID)"/><input type="hidden" id="Status"  name="Status" value="@(Model.Status)"/>
</table>

        @RenderPage("~/Areas/PortalIPS/Views/SMB_Information/Extend/Model_FormHtml.cshtml")
    </form>
</div>
<div region="south" border="false" style="text-align: right; background: #F6F6F6;height: 30px; line-height: 30px;">
    <a id="btnSubmit" class="easyui-linkbutton" icon="icon-ok" href="javascript:void(0)">确定</a>
    <a id="btnCancel" class="easyui-linkbutton" icon="icon-cancel" href="javascript:CloseDialog();">
        取消
    </a>
</div>
@section scripts{
    <script src="/Resources/JsLib/jquery.form.js"></script>
    <script src="/Resources/JsLib/My97DatePicker/WdatePicker.js"></script>
    <script src="/Static/v1/js/Utils.js"></script>
    <script src="/Static/v1/js/form.js"></script>
    <script type="text/javascript">
        jQuery(function() {
            CheckConditions();
jQuery('input[name=InfoType]').bind('click', CheckConditions);
function CheckConditions(){
if(IsInCheckBox(document.myForm.InfoType,'AttachmentInfo')){
jQuery('#Container_Attachment').show();
} 
else{ 
jQuery('#Container_Attachment').hide();
} 
if(IsInCheckBox(document.myForm.InfoType,'OpenInfo')){
jQuery('#Container_BackNvarchar2').show();
} 
else{ 
jQuery('#Container_BackNvarchar2').hide();
} 
if(IsInCheckBox(document.myForm.InfoType,'LinkInfo')){
jQuery('#Container_BackNvarchar4').show();
} 
else{ 
jQuery('#Container_BackNvarchar4').hide();
} 
if((IsInCheckBox(document.myForm.InfoType,'CommonInfo')||IsInCheckBox(document.myForm.InfoType,'AttachmentInfo')||IsInCheckBox(document.myForm.InfoType,'OpenInfo')||IsInCheckBox(document.myForm.InfoType,'VideoInfo')||IsInCheckBox(document.myForm.InfoType,'audioInfo'))){
jQuery('#Container_Content').show();
} 
else{ 
jQuery('#Container_Content').hide();
} 
if((IsInCheckBox(document.myForm.InfoType,'CommonInfo')||IsInCheckBox(document.myForm.InfoType,'AttachmentInfo')||IsInCheckBox(document.myForm.InfoType,'OpenInfo')||IsInCheckBox(document.myForm.InfoType,'audioInfo'))){
jQuery('#Container_Description').show();
} 
else{ 
jQuery('#Container_Description').hide();
} 
if(IsInCheckBox(document.myForm.InfoType,'OpenInfo')){
jQuery('#Container_InfoGuid').show();
} 
else{ 
jQuery('#Container_InfoGuid').hide();
} 
if((IsInCheckBox(document.myForm.InfoType,'CommonInfo')||IsInCheckBox(document.myForm.InfoType,'audioInfo'))){
jQuery('#Container_VideoUrl').show();
} 
else{ 
jQuery('#Container_VideoUrl').hide();
} 
jQuery('fieldset').show(); 
jQuery("fieldset").each(function(){ 
if(jQuery('tr',this).length>0){
if(jQuery('tr:visible',this).length>0){jQuery(this).show()} else{jQuery(this).hide()}
}
});
}
;
        });
    </script>
    @RenderPage("~/Areas/PortalIPS/Views/SMB_Information/Extend/Model_FormJs.cshtml")
}

